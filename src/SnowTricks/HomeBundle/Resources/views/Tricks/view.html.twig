
{% extends "SnowTricksHomeBundle::layout.html.twig" %}


{% block title %}
   {{ parent() }}
{% endblock %}

{% block snow_tricks_body %}


<a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">Voir Images et Videos</a>


<div class="collapse" id="collapseExample">

<div class="container media">
<div class="row justify-content-between">
<div class="col-lg-8 col-md-10 mx-auto>
    <div class="col-6 col-sm-4 col-md-3"">
      <div id="carouselExampleControls1" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
          {% for image in trick.images[:1] %}
            <div class="carousel-item active">
              <img src="{{ asset(image.webPath) }}" alt="{{ image.alt }}" height="400" width="400">
            </div> 
          {% endfor %}

          {% for image in trick.images[1:] %}
            <div class="carousel-item ">
              <img  src="{{ asset(image.webPath) }}" alt="{{ image.alt }}" height="400" width="400">
            </div>
          {% endfor %}
        </div>

        <a class="carousel-control-prev" href="#carouselExampleControls1" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls1" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>    

    <div class="col-6 col-sm-4 col-md-3"">
      <div id="carouselExampleControls2" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
          {% for video in trick.videos[:1] %}
            <div class="carousel-item active">
              <a class="thumbnail" href="#"><embed src="{{ video.url }}" allowfullscreen="true"  height="400" width="400"></a>
            </div> 
          {% endfor %}

          {% for video in trick.videos[1:] %}
            <div class="carousel-item ">
              <a class="thumbnail" href="#"><embed src="{{ video.url }}" allowfullscreen="true"  height="400" width="400"></a> 
            </div>
          {% endfor %}
        </div>

        <a class="carousel-control-prev" href="#carouselExampleControls2" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls2" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>
</div>
  </div>
</div>

</div>

<div class="container article">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-10 mx-auto">
  		<h2 class="section-heading">{{ trick.name }} 
        {% if is_granted('ROLE_USER') %}
              <a href="{{ path('snow_tricks_home_edit', {'id': trick.id}) }}#two"><span class="fa fa-pencil-square-o" aria-hidden="true"> </span></a>
              <a href="{{ path('snow_tricks_home_delete', {'id': trick.id}) }}#two"><span class="fa fa-trash" aria-hidden="true"></span></a>
        {% endif %}     
      </h2>
        <p>Mis à jour le {{ trick.date|date("d/m/Y H:i:s") }} </p>
  			 <p>{{ trick.content }}</p>
           {% if trick.category is null %}
             <p>Il n'y a pas de catégories définies</p>
           {% else %}
  			     <p><em>Dans la catégorie {{ trick.category.name }}</em></p>
           {% endif %}
    </div>
  </div>
</div>


<div class="container message">
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
           <div class="panel panel-primary">
             <h5> Espace de discussion:</h5>
                  {% if is_granted('ROLE_USER') %}
                    <div>
                      {{ include("SnowTricksHomeBundle:Tricks:messageform.html.twig") }}
                    </div>
                  {% endif %}

                  {% if listMessages is defined %}          
                      {% for message in listMessages %}    
                          <div class="panel-body">
                            <ul class="chat">          
                                <li class="left clearfix"><span class="chat-img pull-left">
                                  <img src="{{ asset(message.user.avatar.webPath) }}" alt="{{ message.user.avatar.alt }}" height="30" width="30">
                                  </span>
                                    <div class="chat-body clearfix">
                                        <div class="header">
                                          <strong class="primary-font">{{ message.title }}</strong> <small class="pull-right text-muted"> <i class="fa fa-clock-o"></i>{{ message.date|date("d/m/Y H:i:s") }}</small>
                                        </div>
                                          <p> {{ message.content }} </p>
                                    </div>
                                </li>
                            </ul>
                          </div>    
                      {% endfor %}
                  {% else %}
                      <li>Pas (encore !) de messages</li>
                  {% endif %}   

                    <ul class="pagination">
                        {# On utilise la fonction range(a, b) qui crée un tableau de valeurs entre a et b #}
                          {% for p in range(1, nbPages) %}
                            <li{% if p == page %} class="active"{% endif %}>
                              <a href="{{ path('snow_tricks_home_view', {'page': p, id:trick.id }) }}">{{ p }}</a> 
                            </li>
                          {% endfor %} 
                    </ul>   

            </div>
        </div>
    </div>
</div>
        

<p>
 <a href="{{ path('snow_tricks_home_homepage') }}" class="btn btn-default">
    <i class="glyphicon glyphicon-chevron-left"></i>
       Retour à la liste des figures
  </a>
</p>

{% endblock %}

{% block javascripts %}
 {{ parent() }}

<script type="text/javascript">
  $(window).resize(function(){
    collapse();
  })

collapse();

function collapse()
{
  if (window.matchMedia("(min-width: 600px)").matches) {
    $('#collapseExample').collapse("show")
  } else {
    $('#collapseExample').collapse("hide")
  }
}
</script>

{% endblock %}

