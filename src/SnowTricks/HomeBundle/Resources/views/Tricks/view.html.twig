
{% extends "SnowTricksHomeBundle::layout.html.twig" %}


{% block title %}
   {{ parent() }}
{% endblock %}

{% block snow_tricks_body %}


<div class="container">
  <div class="row justify-content-center">

    <div class="col-6">
      <div id="carouselExampleControls1" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
          {% for image in trick.images[:1] %}
            <div class="carousel-item active">
              <img class="d-block img-fluid" src="{{ image.url }}" hight="300" width="300" alt="{{ image.alt }}">
            </div> 
          {% endfor %}

          {% for image in trick.images[1:] %}
            <div class="carousel-item ">
              <img class="d-block img-fluid" src="{{ image.url }}" hight="300" width="300" alt="{{ image.alt }}">
            </div>
          {% endfor %}
        </div>

        <a class="carousel-control-prev" href="#carouselExampleControls1" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls1" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>    

    <div class="col-6">
      <div id="carouselExampleControls2" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
          {% for video in trick.videos[:1] %}
            <div class="carousel-item active">
              <a class="thumbnail" href="#"><embed src="{{ video.url }}" allowfullscreen="true" width="300" height="300"></a>
            </div> 
          {% endfor %}

          {% for video in trick.videos[1:] %}
            <div class="carousel-item ">
              <a class="thumbnail" href="#"><embed src="{{ video.url }}" allowfullscreen="true" width="300" height="300"></a> 
            </div>
          {% endfor %}
        </div>

        <a class="carousel-control-prev" href="#carouselExampleControls2" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls2" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>

  </div>
</div>

 <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">

  			   <h2 class="section-heading">
      		   {{ trick.name }} 
  			   </h2>

  			   <p>
    			   {{ trick.content }}  
  			   </p>

           {% if trick.category is null %}
              Il n'y a pas de catégories définies
           {% else %}
  			     <p><em>
  			       Dans la catégorie {{ trick.category.name }}
  			     </em></p>
           {% endif %}
  </article>


          {% if listMessages is defined %}
 		      <blockquote class="blockquote">>
      		    Espace de discussion:
              {% if is_granted('ROLE_USER') %}
              <div>
                {{ include("SnowTricksHomeBundle:Tricks:messageform.html.twig") }}
              </div>
              {% endif %}


                {% for message in listMessages %}
                <div class="row test">
                <div class="col-xs-12 col-sm-12 col-md-12">               
                   <a class="pull-left">
                    <img class="media-object" data-src="holder.js/64x64" alt="64x64" style="width: 50px; height: 50px;" src="{{ message.user.avatar }}">
                  </a>
                  <small class="pull-right time"><i class="fa fa-clock-o"></i> {{ message.date|date("d/m/Y H:i:s") }} </small>
                   <h6> {{ message.title }} par {{ message.user.pseudo }} </h6>
                   <p> {{ message.content }} </p>
                {% else %}
                    <li>Pas (encore !) de messages</li>
                  </div>
                  </div>
                {% endfor %}
                </hr>
             
</div>
              <ul class="pagination">
                  {# On utilise la fonction range(a, b) qui crée un tableau de valeurs entre a et b #}
                {% for p in range(1, nbPages) %}
                    <li{% if p == page %} class="active"{% endif %}>
                    <a href="{{ path('snow_tricks_home_view', {'page': p, id:trick.id }) }}">{{ p }}</a> 
                    </li>
                {% endfor %} 
              </ul>   
		      </blockquote>
          {% endif %}


          </div>
        </div>
     </div>


        <p>
            <a href="{{ path('snow_tricks_home_homepage') }}" class="btn btn-default">
            <i class="glyphicon glyphicon-chevron-left"></i>
                Retour à la liste des figures
            </a>
        </p>




{% endblock %}



